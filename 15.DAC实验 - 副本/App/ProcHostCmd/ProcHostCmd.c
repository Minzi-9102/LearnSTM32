/*********************************************************************************************************
* 模块名称：ProcHostCmd.c
* 摘    要：ProcHostCmd模块
* 当前版本：1.0.0
* 作    者：SZLY(COPYRIGHT 2018 - 2020 SZLY. All rights reserved.)
* 完成日期：2020年01月01日
* 内    容：
* 注    意：                                                                  
**********************************************************************************************************
* 取代版本：
* 作    者：
* 完成日期：
* 修改内容： 
* 修改文件： 
*********************************************************************************************************/

/*********************************************************************************************************
*                                              包含头文件
*********************************************************************************************************/
#include "ProcHostCmd.h"
#include "PackUnpack.h"
#include "SendDataToHost.h"
#include "DAC.h"
#include "Wave.h"
/*********************************************************************************************************
*                                              宏定义
*********************************************************************************************************/

/*********************************************************************************************************
*                                              枚举结构体定义
*********************************************************************************************************/

/*********************************************************************************************************
*                                              内部变量
*********************************************************************************************************/
 
/*********************************************************************************************************
*                                              内部函数声明
*********************************************************************************************************/
static u8 OnGenWave(u8* pMsg);//生成波形响应函数
/*********************************************************************************************************
*                                              内部函数实现
*********************************************************************************************************/
/*********************************************************************************************************
* 函数名称：OnGenWave
* 函数功能：
* 输入参数：
* 输出参数：
* 返 回 值：
* 创建日期：2018年01月01日
* 注    意：
*********************************************************************************************************/
static u8 OnGenWave(u8* pMsg)
{
	StructDACWave wave;//DAC波形属性
	
	if (pMsg[0] == 0x00)
	{
		wave.waveBufAddr = (u32)GetSineWave100PointAddr();
	}
	else if(pMsg[0] == 0x01)
	{
		wave.waveBufAddr = (u32)GetTriWave100PointAddr();
	}
	else if(pMsg[0] == 0x02)
	{
		wave.waveBufAddr = (u32)GetRectWave100PointAddr();
	}
	wave.waveBufSize = 100;
//	SetDAC1Wave(wave);
//	SetDAC2Wave(wave);
	return(CMD_ACK_OK);
}
/*********************************************************************************************************
*                                              API函数实现
*********************************************************************************************************/
/*********************************************************************************************************
* 函数名称：InitProcHostCmd
* 函数功能：
* 输入参数：
* 输出参数：
* 返 回 值：
* 创建日期：2018年01月01日
* 注    意：
*********************************************************************************************************/
void InitProcHostCmd(void)
{
	
}
/*********************************************************************************************************
* 函数名称：ProcHostCmd
* 函数功能：
* 输入参数：
* 输出参数：
* 返 回 值：
* 创建日期：2018年01月01日
* 注    意：
*********************************************************************************************************/
void ProcHostCmd(u8 recData)
{
	u8 ack;
	StructPackType pack;
	
	while(UnPackData(recData))
	{
		pack = GetUnPackRslt();
		switch(pack.packModuleId)
		{
			case MODULE_WAVE:
				ack = OnGenWave(pack.arrData);
			SendAckPack(MODULE_WAVE,CMD_GEN_WAVE,ack);
			break;
			default:
				break;
		}
	}

}
